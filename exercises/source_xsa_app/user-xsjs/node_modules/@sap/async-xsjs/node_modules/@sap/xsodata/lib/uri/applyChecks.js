'use strict';

var async = require('async');

module.exports = function applyChecks(checks, context, callback) {
    var checksForKind = checks[context.oData.kind];

    if (!checksForKind) { //no checks for odata.kind defined
        return callback(null, context);
    }

    var contextBoundChecks = checksForKind.map(function (check) {
        return check.bind(null, context);
    });

    async.series(contextBoundChecks, function onApplyChecksDone(err) {
        if (err) {
            return callback(err, context);
        }

        return callback(null, context);
    });
};
