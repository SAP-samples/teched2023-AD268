'use strict';

const connectUtils = require('../connect/utils');

module.exports = function (app) {
  return function connectUtilsMiddleWare(req, res, next) {
    connectUtils.setPropertiesToRequest(req, app);
    const err = connectUtils.validateHeaders(req);
    if (err !== null) {
      err.status = 400;
      return next(err);
    }
    next();
  };
};
